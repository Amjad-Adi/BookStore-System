<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>

<BorderPane xmlns="http://javafx.com/javafx/21"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.database.CustomerPage1Controller"
            prefWidth="1400.0" prefHeight="900.0"
            style="-fx-background-color: linear-gradient(to bottom right, #0F172A, #1e293b);">

    <top>
        <!-- Navigation Bar -->
        <HBox alignment="CENTER_LEFT" spacing="16" BorderPane.alignment="CENTER"
              style="-fx-background-color: #020617; -fx-border-color: #334155; -fx-border-width: 0 0 2 0;">
            <padding>
                <Insets top="16" right="24" bottom="16" left="24"/>
            </padding>

            <!-- Logo & Brand -->
            <HBox alignment="CENTER_LEFT" spacing="12.0">
                <VBox alignment="CENTER" spacing="0">
                    <Label text="ðŸ“š Book Store"
                           style="-fx-text-fill: #F9FAFB; -fx-font-size: 22px; -fx-font-weight: 900;"/>
                    <Label text="Your Literary Haven"
                           style="-fx-text-fill: rgba(249,250,251,0.60); -fx-font-size: 11px; -fx-font-weight: 600;"/>
                </VBox>
            </HBox>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Search Section -->
            <HBox alignment="CENTER" spacing="10.0" prefWidth="480">
                <TextField fx:id="searchField" promptText="Search books, authors, categories..."
                           style="-fx-background-color: #1e293b;
                                  -fx-background-radius: 14;
                                  -fx-border-radius: 14;
                                  -fx-border-color: #475569;
                                  -fx-border-width: 1.5;
                                  -fx-padding: 12 16;
                                  -fx-text-fill: #F9FAFB;
                                  -fx-font-size: 13px;
                                  -fx-prompt-text-fill: rgba(249,250,251,0.45);"
                           HBox.hgrow="ALWAYS"/>

                <Button fx:id="searchButton" text="ðŸ” Search" mnemonicParsing="false" onAction="#onSearch"
                        style="-fx-background-color: #F59E0B;
                               -fx-text-fill: #111827;
                               -fx-font-weight: 900;
                               -fx-font-size: 13px;
                               -fx-background-radius: 14;
                               -fx-padding: 12 20;
                               -fx-cursor: hand;"/>
            </HBox>

            <Region HBox.hgrow="ALWAYS"/>

            <!-- Cart Button with Badge -->
            <StackPane>
                <Button fx:id="viewCartButton" text="ðŸ›’ Cart" onAction="#onViewCart"
                        style="-fx-background-color: #10B981;
                               -fx-text-fill: white;
                               -fx-font-weight: 900;
                               -fx-font-size: 13px;
                               -fx-background-radius: 14;
                               -fx-padding: 12 24;
                               -fx-cursor: hand;"/>

                <Label fx:id="cartCountLabel" text="" visible="false"
                       StackPane.alignment="TOP_RIGHT"
                       style="-fx-background-color: #ef4444;
                              -fx-text-fill: white;
                              -fx-font-weight: bold;
                              -fx-font-size: 11px;
                              -fx-background-radius: 12;
                              -fx-padding: 3 7;
                              -fx-translate-x: 8;
                              -fx-translate-y: -8;"/>
            </StackPane>

            <!-- Auth Section -->
            <StackPane alignment="CENTER_RIGHT">
                <!-- Guest Actions -->
                <HBox fx:id="guestActions" alignment="CENTER_RIGHT" spacing="10.0">
                    <Button fx:id="loginBtn" text="Login" mnemonicParsing="false" onAction="#onLogin"
                            style="-fx-background-color: transparent;
                                   -fx-text-fill: #F9FAFB;
                                   -fx-font-weight: 800;
                                   -fx-font-size: 13px;
                                   -fx-background-radius: 14;
                                   -fx-border-color: #475569;
                                   -fx-border-radius: 14;
                                   -fx-border-width: 1.5;
                                   -fx-padding: 12 20;
                                   -fx-cursor: hand;"/>
                    <Button fx:id="registerBtn" text="Register" mnemonicParsing="false" onAction="#onRegister"
                            style="-fx-background-color: #F59E0B;
                                   -fx-text-fill: #111827;
                                   -fx-font-weight: 900;
                                   -fx-font-size: 13px;
                                   -fx-background-radius: 14;
                                   -fx-padding: 12 20;
                                   -fx-cursor: hand;"/>
                </HBox>

                <!-- User Actions -->
                <HBox fx:id="userActions" alignment="CENTER_RIGHT" spacing="12.0" visible="false" managed="false">
                    <VBox alignment="CENTER_RIGHT" spacing="2">
                        <Label fx:id="welcomeLabel" text="Hi, Customer"
                               style="-fx-text-fill: #F9FAFB; -fx-font-weight: 900; -fx-font-size: 14px;"/>
                        <Label fx:id="budgetLabel" text="Budget: $0.00"
                               style="-fx-text-fill: #10B981; -fx-font-size: 12px; -fx-font-weight: 800;"/>
                    </VBox>
                    <Button fx:id="signOutBtn" text="Sign Out" mnemonicParsing="false" onAction="#onSignOut"
                            style="-fx-background-color: transparent;
                                   -fx-text-fill: #F9FAFB;
                                   -fx-font-weight: 800;
                                   -fx-font-size: 13px;
                                   -fx-background-radius: 14;
                                   -fx-border-color: #475569;
                                   -fx-border-radius: 14;
                                   -fx-border-width: 1.5;
                                   -fx-padding: 12 20;
                                   -fx-cursor: hand;"/>
                </HBox>
            </StackPane>
        </HBox>
    </top>

    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true"
                    style="-fx-background: transparent; -fx-background-color: transparent;"
                    hbarPolicy="NEVER" vbarPolicy="AS_NEEDED">
            <VBox spacing="24.0" BorderPane.alignment="CENTER">
                <padding>
                    <Insets top="24" right="24" bottom="24" left="24"/>
                </padding>

                <!-- Hero Section -->
                <VBox spacing="10" alignment="CENTER_LEFT"
                      style="-fx-background-color: linear-gradient(to right, rgba(245,158,11,0.15), rgba(16,185,129,0.15));
                             -fx-background-radius: 20;
                             -fx-border-color: rgba(255,255,255,0.10);
                             -fx-border-radius: 20;
                             -fx-border-width: 1;">
                    <padding>
                        <Insets top="24" right="24" bottom="24" left="24"/>
                    </padding>

                    <HBox alignment="CENTER_LEFT" spacing="16">
                        <VBox spacing="6" HBox.hgrow="ALWAYS">
                            <Label text="Discover Your Next Great Read"
                                   style="-fx-text-fill: #F9FAFB; -fx-font-size: 28px; -fx-font-weight: 900;"/>
                            <Label text="Browse our collection of popular books and find something new to love."
                                   style="-fx-text-fill: rgba(249,250,251,0.75); -fx-font-size: 14px;"/>
                        </VBox>

                        <Button fx:id="refreshBtn" text="â†» Refresh" mnemonicParsing="false" onAction="#onRefresh"
                                style="-fx-background-color: rgba(255,255,255,0.12);
                                       -fx-text-fill: #F9FAFB;
                                       -fx-font-weight: 800;
                                       -fx-font-size: 13px;
                                       -fx-background-radius: 14;
                                       -fx-border-color: rgba(255,255,255,0.20);
                                       -fx-border-radius: 14;
                                       -fx-border-width: 1;
                                       -fx-padding: 12 20;
                                       -fx-cursor: hand;"/>
                    </HBox>
                </VBox>

                <!-- Main Content Area -->
                <HBox spacing="20.0" VBox.vgrow="ALWAYS" alignment="TOP_CENTER">

                    <!-- Popular Products Section -->
                    <VBox spacing="14.0" HBox.hgrow="ALWAYS" prefWidth="650" maxWidth="700"
                          style="-fx-background-color: rgba(255,255,255,0.97);
                                 -fx-background-radius: 20;
                                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.20), 16, 0.15, 0, 4);">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label text="â­ Most Popular"
                                   style="-fx-text-fill: #111827; -fx-font-size: 20px; -fx-font-weight: 900;"/>
                            <Region HBox.hgrow="ALWAYS"/>
                            <Label text="Top picks from readers"
                                   style="-fx-text-fill: #64748b; -fx-font-size: 12px; -fx-font-weight: 600;"/>
                        </HBox>

                        <Separator style="-fx-background-color: #e5e7eb;"/>

                        <ScrollPane fitToWidth="true"
                                    style="-fx-background: transparent; -fx-background-color: transparent;"
                                    VBox.vgrow="ALWAYS"
                                    hbarPolicy="NEVER"
                                    vbarPolicy="AS_NEEDED">
                            <FlowPane fx:id="popularFlow" hgap="16" vgap="16"
                                      alignment="TOP_LEFT"
                                      prefWrapLength="650"/>
                        </ScrollPane>
                    </VBox>

                    <!-- All Products Section -->
                    <VBox spacing="14.0" HBox.hgrow="ALWAYS" prefWidth="650" maxWidth="700"
                          style="-fx-background-color: rgba(255,255,255,0.97);
                                 -fx-background-radius: 20;
                                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.20), 16, 0.15, 0, 4);">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="12">
                            <Label text="ðŸ“– All Products"
                                   style="-fx-text-fill: #111827; -fx-font-size: 20px; -fx-font-weight: 900;"/>
                            <Region HBox.hgrow="ALWAYS"/>

                            <Label text="Sort by:"
                                   style="-fx-text-fill: #374151; -fx-font-weight: 800; -fx-font-size: 12px;"/>
                            <ComboBox fx:id="sortByCombo" prefWidth="140" onAction="#onSortChange"
                                      style="-fx-font-size: 12px;"/>
                            <Button fx:id="sortDirBtn" text="â†‘ ASC" onAction="#onToggleSortDir"
                                    style="-fx-background-color: #f1f5f9;
                                           -fx-text-fill: #111827;
                                           -fx-font-weight: 900;
                                           -fx-font-size: 11px;
                                           -fx-background-radius: 10;
                                           -fx-padding: 8 12;
                                           -fx-cursor: hand;"/>
                        </HBox>

                        <Separator style="-fx-background-color: #e5e7eb;"/>

                        <ScrollPane fitToWidth="true"
                                    style="-fx-background: transparent; -fx-background-color: transparent;"
                                    VBox.vgrow="ALWAYS"
                                    hbarPolicy="NEVER"
                                    vbarPolicy="AS_NEEDED">
                            <FlowPane fx:id="allProductsFlow" hgap="16" vgap="16"
                                      alignment="TOP_LEFT"
                                      prefWrapLength="650"/>
                        </ScrollPane>
                    </VBox>
                </HBox>

                <!-- Footer -->
                <HBox alignment="CENTER" spacing="8"
                      style="-fx-background-color: rgba(255,255,255,0.05);
                             -fx-background-radius: 14;
                             -fx-border-color: rgba(255,255,255,0.08);
                             -fx-border-radius: 14;
                             -fx-border-width: 1;">
                    <padding>
                        <Insets top="16" right="20" bottom="16" left="20"/>
                    </padding>
                    <Label text="Â© 2025 Book Store â€¢"
                           style="-fx-text-fill: rgba(249,250,251,0.60); -fx-font-size: 12px; -fx-font-weight: 600;"/>
                </HBox>
            </VBox>
        </ScrollPane>
    </center>
</BorderPane>